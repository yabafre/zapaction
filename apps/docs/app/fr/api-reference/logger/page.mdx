# API Logger

Logging configurable du pipeline pour `defineAction`.

## configureLogger

```ts
import { configureLogger } from "@zapaction/core";

configureLogger({
  enabled: true,
  level: "debug",
  onLog: (event) => console.log(event),
});
```

### LoggerOptions

| Propriété | Type | Défaut | Description |
|-----------|------|--------|-------------|
| `enabled` | `boolean` | `false` | Activer/désactiver le logging |
| `level` | `ActionLogLevel` | `"debug"` | Niveau minimum de log |
| `onLog` | `(event: ActionLogEvent) => void` | console | Handler de log personnalisé |

## ActionLogEvent

```ts
type ActionLogEvent = {
  timestamp: number;
  actionName: string;
  phase: ActionLogPhase;
  level: ActionLogLevel;
  duration?: number;
  data?: unknown;
};
```

## ActionLogPhase

| Phase | Description |
|-------|-------------|
| `action_start` | Action invoquée |
| `context_resolved` | Context factory retourné |
| `before_action` | Hook beforeAction terminé |
| `handler_complete` | Handler retourné |
| `after_action` | Hook afterAction terminé |
| `validation_complete` | Schéma output validé |
| `revalidation_complete` | Tags de cache revalidés |
| `action_error` | Erreur levée à n'importe quelle étape |

## ActionLogLevel

`"debug"` | `"info"` | `"warn"` | `"error"`

Les niveaux filtrent dans l'ordre : debug &lt; info &lt; warn &lt; error.

## Nom de l'action

Définissez l'option `name` dans `defineAction` pour identifier les actions dans les logs :

```ts
const createUser = defineAction({
  name: "createUser",
  input: z.object({ name: z.string() }),
  handler: async ({ input }) => { ... },
});
```

Les actions sans `name` apparaissent comme `"anonymous"` dans les événements de log.

## Zéro overhead quand désactivé

Quand `enabled: false` (défaut), le logger est un no-op. Aucun objet n'est alloué, aucune fonction n'est appelée.
