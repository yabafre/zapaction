---
title: "defineAction"
description: "API de contrat d'action type de @zapaction/core."
---

# defineAction

`defineAction` valide input/output a l'execution tout en conservant le typage TypeScript.

## Signature

```ts packages/core/src/defineAction.ts
export function defineAction<TInput, TOutput, TContext = unknown>(
  options: DefineActionOptions<TInput, TOutput, TContext>
): DefinedAction<TInput, TOutput>
```

## Options

| Option | Type | Obligatoire | Notes |
| --- | --- | --- | --- |
| `input` | `ZodType<TInput>` | Oui | Validation runtime de l'input |
| `output` | `ZodType<TOutput>` | Non | Validation runtime de l'output |
| `name` | `string` | Non | Utilise par le logger |
| `tags` | `readonly string[]` | Non | Passe a `revalidateTags` |
| `beforeAction` | `(args) => void \| Promise<void>` | Non | Execute avant handler |
| `afterAction` | `(args) => TOutput \| void \| Promise<TOutput \| void>` | Non | Execute apres handler |
| `handler` | `({ input, ctx }) => Promise<TOutput>` | Oui | Implementation principale |

## Exemple

```ts app/actions.ts
import { defineAction } from "@zapaction/core";
import { z } from "zod";

export const updateTodo = defineAction({
  name: "updateTodo",
  input: z.object({ id: z.string(), done: z.boolean() }),
  output: z.object({ id: z.string(), done: z.boolean() }),
  tags: ["todos"],
  handler: async ({ input }) => ({
    id: input.id,
    done: input.done
  })
});
```
